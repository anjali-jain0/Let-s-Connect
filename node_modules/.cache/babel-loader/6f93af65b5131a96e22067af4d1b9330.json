{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Anjali\\\\Desktop\\\\AJ\\\\mern_social\\\\src\\\\followedpost.js\";\nimport React, { Component } from 'react';\n\nvar Followedpost =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Followedpost, _Component);\n\n  function Followedpost(props) {\n    var _this;\n\n    _classCallCheck(this, Followedpost);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Followedpost).call(this, props));\n\n    _this.handleChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.handleSubmit = function (e, id) {\n      e.preventDefault();\n      var cmt = _this.state.cmt;\n      fetch('/comment/' + cmt + '/' + id).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        return _this.setState({\n          posts: data.posts\n        });\n      });\n    };\n\n    _this.handleLike = function (id) {\n      fetch('/post/' + id).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        return _this.setState({\n          posts: data.posts\n        });\n      });\n    };\n\n    _this.handleShare1 = function (e) {\n      var shared = _this.state.share_seleted;\n      shared.push(e.target.value);\n\n      _this.setState({\n        share_seleted: shared\n      });\n    };\n\n    _this.handleShare2 =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e, id, myid) {\n        var register, subscription;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault(); //store this somewhere??\n\n                if (!('serviceWorker' in navigator)) {\n                  _context.next = 11;\n                  break;\n                }\n\n                console.log('Registering SW...');\n                _context.next = 5;\n                return navigator.serviceWorker.register('./worker2.js', {\n                  scope: '/'\n                });\n\n              case 5:\n                register = _context.sent;\n                console.log('SW is registered...');\n                console.log('Register Subscription...');\n                subscription = register.pushManager.subscribe({\n                  userVisibleOnly: true,\n                  applicationServerKey: _this.urlBase64ToUint8Array(_this.state.publicKey)\n                });\n                console.log('Push notification...');\n                fetch('/share/' + id + '/' + myid + '/' + _this.state.share_seleted, {\n                  method: 'POST',\n                  body: JSON.stringify(subscription),\n                  headers: {\n                    'content-type': 'application/json'\n                  }\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x, _x2, _x3) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleTag1 = function (e) {\n      var taged = _this.state.tag_seleted;\n      taged.push(e.target.value);\n\n      _this.setState({\n        tag_seleted: taged\n      });\n    };\n\n    _this.handleTag2 =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e, id, myid) {\n        var register, subscription;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!('serviceWorker' in navigator)) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                console.log('Registering SW...');\n                _context2.next = 5;\n                return navigator.serviceWorker.register('./worker2.js', {\n                  scope: '/'\n                });\n\n              case 5:\n                register = _context2.sent;\n                console.log('SW is registered...');\n                console.log('Register Subscription...');\n                subscription = register.pushManager.subscribe({\n                  userVisibleOnly: true,\n                  applicationServerKey: _this.urlBase64ToUint8Array(_this.state.publicKey)\n                });\n                console.log('Push notification...');\n                fetch('/tag/' + id + '/' + myid + '/' + _this.state.tag_seleted, {\n                  method: 'POST',\n                  body: JSON.stringify(subscription),\n                  headers: {\n                    'content-type': 'application/json'\n                  }\n                });\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function (_x4, _x5, _x6) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.urlBase64ToUint8Array = function (base64String) {\n      var padding = '='.repeat((4 - base64String.length % 4) % 4);\n      var base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');\n      var rawData = window.atob(base64);\n      var outputArray = new Uint8Array(rawData.length);\n\n      for (var i = 0; i < rawData.length; ++i) {\n        outputArray[i] = rawData.charCodeAt(i);\n      }\n\n      return outputArray;\n    };\n\n    _this.state = {\n      user: '',\n      share_seleted: '',\n      tag_selected: '',\n      following: '',\n      posts: '',\n      cmt: '',\n      allusers: '',\n      publicKey: 'BKgPEG-yxGjEwubcob9tfvgfOkqjJW9EPe60SDiaJNo_EudTYOMZGkjdVP9wzVUJOCcmecelw4OKbHu-tcw2p4Y'\n    };\n    return _this;\n  }\n\n  _createClass(Followedpost, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      var id = this.props.usr_id;\n      fetch('/followedpost/' + id).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        return _this2.setState({\n          posts: data\n        });\n      });\n      fetch('/myfollowing/' + id).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        return _this2.setState({\n          user: data\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      // var compo = (this.state.following && this.state.following.map(name => {\n      //               return (\n      //                 <div><button onClick={() => this.handlePost(name)}>{name}</button></div>\n      //               );\n      //             })\n      //             )\n      console.log(this.state.posts);\n      var share = this.state.user && this.state.user.map(function (user) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          name: \"name\",\n          value: user._id,\n          onChange: _this3.handleShare1,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }), user.name, \" - Share \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }));\n      });\n      var tag = this.state.user && this.state.user.map(function (user) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          name: \"name\",\n          value: user._id,\n          onChange: _this3.handleTag1,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }), \" \", user.name, \" - Tag \", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }));\n      });\n      var posts = this.state.posts && this.state.posts.map(function (post) {\n        return React.createElement(\"div\", {\n          className: \"card\",\n          style: \"width: 20rem;\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, post.caption));\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, posts);\n    }\n  }]);\n\n  return Followedpost;\n}(Component);\n\nexport default Followedpost;","map":{"version":3,"sources":["C:\\Users\\Anjali\\Desktop\\AJ\\mern_social\\src\\followedpost.js"],"names":["React","Component","Followedpost","props","handleChange","e","setState","target","name","value","handleSubmit","id","preventDefault","cmt","state","fetch","then","res","json","data","posts","handleLike","handleShare1","shared","share_seleted","push","handleShare2","myid","navigator","console","log","serviceWorker","register","scope","subscription","pushManager","subscribe","userVisibleOnly","applicationServerKey","urlBase64ToUint8Array","publicKey","method","body","JSON","stringify","headers","handleTag1","taged","tag_seleted","handleTag2","base64String","padding","repeat","length","base64","replace","rawData","window","atob","outputArray","Uint8Array","i","charCodeAt","user","tag_selected","following","allusers","usr_id","share","map","_id","tag","post","caption"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;IAEMC,Y;;;;;AAEJ,wBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,sFAAMA,KAAN;;AADgB,UAyBlBC,YAzBkB,GAyBH,UAACC,CAAD,EAAO;AACpB,YAAKC,QAAL,qBAAgBD,CAAC,CAACE,MAAF,CAASC,IAAzB,EAA+BH,CAAC,CAACE,MAAF,CAASE,KAAxC;AACD,KA3BiB;;AAAA,UAmClBC,YAnCkB,GAmCH,UAACL,CAAD,EAAIM,EAAJ,EAAW;AACxBN,MAAAA,CAAC,CAACO,cAAF;AACA,UAAIC,GAAG,GAAG,MAAKC,KAAL,CAAWD,GAArB;AACAE,MAAAA,KAAK,CAAC,cAAcF,GAAd,GAAoB,GAApB,GAA0BF,EAA3B,CAAL,CACGK,IADH,CACQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OADX,EAEGF,IAFH,CAEQ,UAAAG,IAAI;AAAA,eAAI,MAAKb,QAAL,CAAc;AAACc,UAAAA,KAAK,EAAGD,IAAI,CAACC;AAAd,SAAd,CAAJ;AAAA,OAFZ;AAGD,KAzCiB;;AAAA,UA2ClBC,UA3CkB,GA2CL,UAACV,EAAD,EAAQ;AAEnBI,MAAAA,KAAK,CAAC,WAAWJ,EAAZ,CAAL,CACGK,IADH,CACQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OADX,EAEGF,IAFH,CAEQ,UAAAG,IAAI;AAAA,eAAI,MAAKb,QAAL,CAAc;AAACc,UAAAA,KAAK,EAAGD,IAAI,CAACC;AAAd,SAAd,CAAJ;AAAA,OAFZ;AAGD,KAhDiB;;AAAA,UAkDlBE,YAlDkB,GAkDH,UAACjB,CAAD,EAAO;AAEpB,UAAIkB,MAAM,GAAG,MAAKT,KAAL,CAAWU,aAAxB;AACAD,MAAAA,MAAM,CAACE,IAAP,CAAYpB,CAAC,CAACE,MAAF,CAASE,KAArB;;AACA,YAAKH,QAAL,CAAc;AAACkB,QAAAA,aAAa,EAAGD;AAAjB,OAAd;AACD,KAvDiB;;AAAA,UAyDlBG,YAzDkB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAyDH,iBAAOrB,CAAP,EAAWM,EAAX,EAAgBgB,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACbtB,gBAAAA,CAAC,CAACO,cAAF,GADa,CAGb;;AAHa,sBAKV,mBAAmBgB,SALT;AAAA;AAAA;AAAA;;AAMXC,gBAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AANW;AAAA,uBAOYF,SAAS,CAACG,aAAV,CAAwBC,QAAxB,CAAiC,cAAjC,EAAgD;AACrEC,kBAAAA,KAAK,EAAC;AAD+D,iBAAhD,CAPZ;;AAAA;AAOLD,gBAAAA,QAPK;AAWTH,gBAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACMI,gBAAAA,YAbG,GAaUF,QAAQ,CAACG,WAAT,CAAqBC,SAArB,CAA+B;AAClDC,kBAAAA,eAAe,EAAC,IADkC;AAElDC,kBAAAA,oBAAoB,EAAC,MAAKC,qBAAL,CAA2B,MAAKzB,KAAL,CAAW0B,SAAtC;AAF6B,iBAA/B,CAbV;AAkBTX,gBAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAf,gBAAAA,KAAK,CAAC,YAAYJ,EAAZ,GAAiB,GAAjB,GAAuBgB,IAAvB,GAA8B,GAA9B,GAAoC,MAAKb,KAAL,CAAWU,aAAhD,EAA8D;AACnEiB,kBAAAA,MAAM,EAAC,MAD4D;AAEnEC,kBAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAeV,YAAf,CAF8D;AAGnEW,kBAAAA,OAAO,EAAC;AACN,oCAAe;AADT;AAH2D,iBAA9D,CAAL;;AAnBS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAzDG;;AAAA;AAAA;AAAA;AAAA;;AAAA,UAsFjBC,UAtFiB,GAsFJ,UAACzC,CAAD,EAAO;AAEnB,UAAI0C,KAAK,GAAG,MAAKjC,KAAL,CAAWkC,WAAvB;AACAD,MAAAA,KAAK,CAACtB,IAAN,CAAWpB,CAAC,CAACE,MAAF,CAASE,KAApB;;AACA,YAAKH,QAAL,CAAc;AAAC0C,QAAAA,WAAW,EAAGD;AAAf,OAAd;AACD,KA3FiB;;AAAA,UA6FlBE,UA7FkB;AAAA;AAAA;AAAA;AAAA;AAAA,+BA6FL,kBAAO5C,CAAP,EAAWM,EAAX,EAAgBgB,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACXtB,gBAAAA,CAAC,CAACO,cAAF;;AADW,sBAER,mBAAmBgB,SAFX;AAAA;AAAA;AAAA;;AAGTC,gBAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AAHS;AAAA,uBAIcF,SAAS,CAACG,aAAV,CAAwBC,QAAxB,CAAiC,cAAjC,EAAgD;AACrEC,kBAAAA,KAAK,EAAC;AAD+D,iBAAhD,CAJd;;AAAA;AAIHD,gBAAAA,QAJG;AAQPH,gBAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAD,gBAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACMI,gBAAAA,YAVC,GAUYF,QAAQ,CAACG,WAAT,CAAqBC,SAArB,CAA+B;AAClDC,kBAAAA,eAAe,EAAC,IADkC;AAElDC,kBAAAA,oBAAoB,EAAC,MAAKC,qBAAL,CAA2B,MAAKzB,KAAL,CAAW0B,SAAtC;AAF6B,iBAA/B,CAVZ;AAePX,gBAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAf,gBAAAA,KAAK,CAAC,UAAUJ,EAAV,GAAe,GAAf,GAAqBgB,IAArB,GAA4B,GAA5B,GAAkC,MAAKb,KAAL,CAAWkC,WAA9C,EAA0D;AAC/DP,kBAAAA,MAAM,EAAC,MADwD;AAE/DC,kBAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAeV,YAAf,CAF0D;AAG/DW,kBAAAA,OAAO,EAAC;AACN,oCAAe;AADT;AAHuD,iBAA1D,CAAL;;AAhBO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OA7FK;;AAAA;AAAA;AAAA;AAAA;;AAAA,UAwHlBN,qBAxHkB,GAwHM,UAACW,YAAD,EAAkB;AACxC,UAAMC,OAAO,GAAG,IAAIC,MAAJ,CAAW,CAAC,IAAIF,YAAY,CAACG,MAAb,GAAsB,CAA3B,IAAgC,CAA3C,CAAhB;AACA,UAAMC,MAAM,GAAG,CAACJ,YAAY,GAAGC,OAAhB,EACZI,OADY,CACJ,IADI,EACE,GADF,EAEZA,OAFY,CAEJ,IAFI,EAEE,GAFF,CAAf;AAIA,UAAMC,OAAO,GAAGC,MAAM,CAACC,IAAP,CAAYJ,MAAZ,CAAhB;AACA,UAAMK,WAAW,GAAG,IAAIC,UAAJ,CAAeJ,OAAO,CAACH,MAAvB,CAApB;;AAEA,WAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,OAAO,CAACH,MAA5B,EAAoC,EAAEQ,CAAtC,EAAyC;AACvCF,QAAAA,WAAW,CAACE,CAAD,CAAX,GAAiBL,OAAO,CAACM,UAAR,CAAmBD,CAAnB,CAAjB;AACD;;AACD,aAAOF,WAAP;AACD,KArIiB;;AAEhB,UAAK7C,KAAL,GAAW;AACTiD,MAAAA,IAAI,EAAC,EADI;AAETvC,MAAAA,aAAa,EAAG,EAFP;AAGTwC,MAAAA,YAAY,EAAG,EAHN;AAITC,MAAAA,SAAS,EAAG,EAJH;AAKT7C,MAAAA,KAAK,EAAG,EALC;AAMTP,MAAAA,GAAG,EAAC,EANK;AAOTqD,MAAAA,QAAQ,EAAG,EAPF;AAQT1B,MAAAA,SAAS,EAAC;AARD,KAAX;AAFgB;AAYjB;;;;yCAEmB;AAAA;;AACnB,UAAI7B,EAAE,GAAG,KAAKR,KAAL,CAAWgE,MAApB;AACCpD,MAAAA,KAAK,CAAC,mBAAmBJ,EAApB,CAAL,CACCK,IADD,CACM,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OADT,EAECF,IAFD,CAEM,UAAAG,IAAI;AAAA,eAAI,MAAI,CAACb,QAAL,CAAc;AAACc,UAAAA,KAAK,EAACD;AAAP,SAAd,CAAJ;AAAA,OAFV;AAIAJ,MAAAA,KAAK,CAAC,kBAAkBJ,EAAnB,CAAL,CACCK,IADD,CACM,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OADT,EAECF,IAFD,CAEM,UAAAG,IAAI;AAAA,eAAI,MAAI,CAACb,QAAL,CAAc;AAACyD,UAAAA,IAAI,EAAC5C;AAAN,SAAd,CAAJ;AAAA,OAFV;AAGD;;;6BAgHQ;AAAA;;AACP;AACA;AACA;AACA;AACA;AACA;AAEAU,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKhB,KAAL,CAAWM,KAAvB;AAEA,UAAIgD,KAAK,GAAI,KAAKtD,KAAL,CAAWiD,IAAX,IAAmB,KAAKjD,KAAL,CAAWiD,IAAX,CAAgBM,GAAhB,CAAoB,UAAAN,IAAI,EAAI;AAC9C,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAO,UAAA,IAAI,EAAC,UAAZ;AAAuB,UAAA,IAAI,EAAC,MAA5B;AAAmC,UAAA,KAAK,EAAEA,IAAI,CAACO,GAA/C;AAAoD,UAAA,QAAQ,EAAI,MAAI,CAAChD,YAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,EAEEyC,IAAI,CAACvD,IAFP,eAEqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFrB,CADF;AAMD,OAPmB,CAAhC;AAUA,UAAI+D,GAAG,GAAI,KAAKzD,KAAL,CAAWiD,IAAX,IAAmB,KAAKjD,KAAL,CAAWiD,IAAX,CAAgBM,GAAhB,CAAoB,UAAAN,IAAI,EAAI;AAC5C,eACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAO,UAAA,IAAI,EAAC,UAAZ;AAAuB,UAAA,IAAI,EAAC,MAA5B;AAAmC,UAAA,KAAK,EAAEA,IAAI,CAACO,GAA/C;AAAoD,UAAA,QAAQ,EAAI,MAAI,CAACxB,UAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,OACqFiB,IAAI,CAACvD,IAD1F,aACsG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADtG,CADF;AAKD,OANiB,CAA9B;AASA,UAAIY,KAAK,GAAK,KAAKN,KAAL,CAAWM,KAAX,IAAoB,KAAKN,KAAL,CAAWM,KAAX,CAAiBiD,GAAjB,CAAqB,UAAAG,IAAI,EAAI;AACjD,eAEE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAsB,UAAA,KAAK,EAAC,eAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAIA,IAAI,CAACC,OAAT,CADA,CAFF;AAOD,OARqB,CAAlC;AAWF,aACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACCrD,KADD,CADA;AAMD;;;;EAvL0BnB,S;;AAyL3B,eAAeC,YAAf","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass Followedpost extends Component {\r\n  \r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      user:'',\r\n      share_seleted : '',\r\n      tag_selected : '',\r\n      following : '',\r\n      posts : '',\r\n      cmt:'',\r\n      allusers : '',\r\n      publicKey:'BKgPEG-yxGjEwubcob9tfvgfOkqjJW9EPe60SDiaJNo_EudTYOMZGkjdVP9wzVUJOCcmecelw4OKbHu-tcw2p4Y'\r\n    }\r\n  }\r\n\r\n  componentWillMount(){\r\n   var id = this.props.usr_id;\r\n    fetch('/followedpost/' + id)\r\n    .then(res => res.json())\r\n    .then(data => this.setState({posts:data}));\r\n    \r\n    fetch('/myfollowing/' + id)\r\n    .then(res => res.json())\r\n    .then(data => this.setState({user:data}));\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.setState({[e.target.name]:e.target.value});\r\n  }\r\n  \r\n  // handlePost = (name) => {\r\n  //   fetch('/showpost/' + name)\r\n  //     .then(res => res.json())\r\n  //     .then(data => this.setState({posts : data.posts}))\r\n  // }\r\n\r\n  handleSubmit = (e ,id) => {\r\n    e.preventDefault();\r\n    var cmt = this.state.cmt;\r\n    fetch('/comment/' + cmt + '/' + id)\r\n      .then(res => res.json())\r\n      .then(data => this.setState({posts : data.posts}));\r\n  }\r\n \r\n  handleLike = (id) => {\r\n\r\n    fetch('/post/' + id)\r\n      .then(res => res.json())\r\n      .then(data => this.setState({posts : data.posts}))\r\n  }\r\n\r\n  handleShare1 = (e) => {\r\n    \r\n    var shared = this.state.share_seleted;\r\n    shared.push(e.target.value);\r\n    this.setState({share_seleted : shared});\r\n  }\r\n\r\n  handleShare2 = async (e , id , myid) => {\r\n    e.preventDefault();\r\n\r\n    //store this somewhere??\r\n\r\n    if('serviceWorker' in navigator){\r\n      console.log('Registering SW...');\r\n      const register = await navigator.serviceWorker.register('./worker2.js',{\r\n        scope:'/'\r\n      });\r\n\r\n        console.log('SW is registered...');\r\n        console.log('Register Subscription...');\r\n        const subscription=register.pushManager.subscribe({\r\n        userVisibleOnly:true,\r\n        applicationServerKey:this.urlBase64ToUint8Array(this.state.publicKey)\r\n        });\r\n      \r\n        console.log('Push notification...');\r\n        fetch('/share/' + id + '/' + myid + '/' + this.state.share_seleted,{\r\n        method:'POST',\r\n        body:JSON.stringify(subscription),\r\n        headers:{\r\n          'content-type':'application/json'\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n   handleTag1 = (e) => {\r\n    \r\n    var taged = this.state.tag_seleted;\r\n    taged.push(e.target.value);\r\n    this.setState({tag_seleted : taged});\r\n  }\r\n\r\n  handleTag2 = async (e , id , myid) => {\r\n    e.preventDefault();\r\n    if('serviceWorker' in navigator){\r\n      console.log('Registering SW...');\r\n      const register = await navigator.serviceWorker.register('./worker2.js',{\r\n        scope:'/'\r\n      });\r\n\r\n        console.log('SW is registered...');\r\n        console.log('Register Subscription...');\r\n        const subscription=register.pushManager.subscribe({\r\n        userVisibleOnly:true,\r\n        applicationServerKey:this.urlBase64ToUint8Array(this.state.publicKey)\r\n        });\r\n      \r\n        console.log('Push notification...');\r\n        fetch('/tag/' + id + '/' + myid + '/' + this.state.tag_seleted,{\r\n        method:'POST',\r\n        body:JSON.stringify(subscription),\r\n        headers:{\r\n          'content-type':'application/json'\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  urlBase64ToUint8Array = (base64String) => {\r\n    const padding = '='.repeat((4 - base64String.length % 4) % 4);\r\n    const base64 = (base64String + padding)\r\n      .replace(/-/g, '+')\r\n      .replace(/_/g, '/');\r\n\r\n    const rawData = window.atob(base64);\r\n    const outputArray = new Uint8Array(rawData.length);\r\n\r\n    for (let i = 0; i < rawData.length; ++i) {\r\n      outputArray[i] = rawData.charCodeAt(i);\r\n    }\r\n    return outputArray;\r\n  }\r\n\r\n  render() { \r\n    // var compo = (this.state.following && this.state.following.map(name => {\r\n    //               return (\r\n    //                 <div><button onClick={() => this.handlePost(name)}>{name}</button></div>\r\n    //               );\r\n    //             })\r\n    //             )\r\n\r\n    console.log(this.state.posts);\r\n\r\n    var share = (this.state.user && this.state.user.map(user => {\r\n                  return (\r\n                    <div>\r\n                    <input type=\"checkbox\" name=\"name\" value={user._id} onChange = {this.handleShare1} />\r\n                     {user.name} - Share <br/>\r\n                    </div>\r\n                  );\r\n                })\r\n                )\r\n\r\n    var tag = (this.state.user && this.state.user.map(user => {\r\n                  return (\r\n                    <div>\r\n                    <input type=\"checkbox\" name=\"name\" value={user._id} onChange = {this.handleTag1} /> {user.name} - Tag <br />\r\n                    </div>\r\n                  );\r\n                })\r\n                )\r\n\r\n    var posts =  (this.state.posts && this.state.posts.map(post => {\r\n                  return (\r\n\r\n                    <div className=\"card\" style=\"width: 20rem;\">\r\n                    <p>{post.caption}</p>\r\n                  </div>\r\n        \r\n                  );\r\n                })\r\n    );\r\n\r\n  return (\r\n  <div>\r\n  {posts}\r\n  </div>\r\n  );\r\n\r\n}}\r\n\r\nexport default Followedpost;\r\n"]},"metadata":{},"sourceType":"module"}